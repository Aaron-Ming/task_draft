{% extends "layout.html" %}

{% block script %}

<!-- <script type="text/javascript" src="https://code.jquery.com/jquery-1.12.3.js"></script> -->
<script type="text/javascript" charset="utf8" src="//cdn.datatables.net/1.10.12/js/jquery.dataTables.js"></script>

{% endblock %}

{% block data %}
<h3 class="sub-header">用户管理<br><br><button type="button" class="btn btn-primary btn-sm" data-toggle="modal" data-target="#add-user-Modal">新建用户</button></h3>

<div class="table-responsive scroll_layer">
  <table class="table table-striped display" cellspacing="0" id="data-table" width="100%">
    <thead class='width_auto_adaptation fixed'>
      <tr>
        <th>USE</th>
        <th>用户名</th>
        <th>密码</th>
        <th>角色</th>
        <th>操作</th>
      </tr>
    </thead>

    <tbody id='tbody-content' class='width_auto_adaptation'>
        {% for data in user_info %}
        <tr>
            <td>{{loop.index}}</td>
            <td>{{data['username']}}</td>
            <td>{{data['password']}}</td>
            <td>{{data['role']}}</td>
            
            <td><button data-userid="{{data['id']}}" class="btn btn-danger btn-xs delete-user-btn">删除</button><button type="submit" data-userid="{{data['id']}}" data-username="{{data['username']}}" data-password="{{data['password']}}" data-role="{{data['role']}}" style="margin-left:10px;" class="btn btn-warning btn-xs update-user-btn" data-toggle="modal" data-target="#update-user-Modal">更新</button></td>
        </tr>
        {% endfor %}
    </tbody>
  </table>
</div>


<script>
    $(document).ready(function() {
    $('#data-table').DataTable({
        'dom': '<"float_left"f>r<"float_right"l>tip',
        'language': {
            'emptyTable': '没有数据',
            'loadingRecords': '加载中...',
            'processing': '查询中...',
            'search': '检索:',
            'lengthMenu': '每页 _MENU_ 条',
            'zeroRecords': '没有数据',
            'paginate': {
                'first': '第一页',
                'last': '最后一页',
                'next': '下一页',
                'previous': '上一页'
            },
            'info': '第 _PAGE_ 页 / 总 _PAGES_ 页',
            'infoEmpty': '没有数据',
            'infoFiltered': '(过滤总件数 _MAX_ 条)'
        },
        'scrollCollapse': true,
        'scrollY': true,
        'scrollX': true,
        'scrollXInner': "150%"
    });
});

</script>
{% endblock %}